# Lumina Grocer 2.0 - –°–µ–º–µ–π–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫ –¥–ª—è Telegram

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ–≤–º–µ—Å—Ç–Ω—ã—Ö —Å–ø–∏—Å–∫–æ–≤ –ø–æ–∫—É–ø–æ–∫ —á–µ—Ä–µ–∑ Telegram Mini Apps —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –≤–≤–æ–¥–∞ —á–µ—Ä–µ–∑ –ò–ò.

## üåü –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–°–ø–∏—Å–∫–∏ –ø–æ–∫—É–ø–æ–∫**: –°–æ–∑–¥–∞–≤–∞–π—Ç–µ –∏ —É–ø—Ä–∞–≤–ª—è–π—Ç–µ —Ç–æ–≤–∞—Ä–∞–º–∏
- **–ì–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥**: –î–∏–∫—Ç—É–π—Ç–µ —Å–ø–∏—Å–æ–∫ —á–µ—Ä–µ–∑ –ò–ò (Gemini)
- **–°–æ–≤–º–µ—Å—Ç–Ω—ã–π –¥–æ—Å—Ç—É–ø**: –ü—Ä–∏–≥–ª–∞—Å–∏—Ç–µ –¥–æ 5 —á–µ–ª–æ–≤–µ–∫ –≤ —Å–µ–º–µ–π–Ω—ã–π —Å–ø–∏—Å–æ–∫
- **–ö–∞—Ç–µ–≥–æ—Ä–∏–∏**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è —Ç–æ–≤–∞—Ä–æ–≤ —Å –ø–æ–º–æ—â—å—é –ò–ò
- **–ò—Å—Ç–æ—Ä–∏—è**: –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —á–∞—Å—Ç—ã—Ö –ø–æ–∫—É–ø–æ–∫
- **–¢–µ–º–Ω–∞—è —Ç–µ–º–∞**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–≤–µ—Ç–ª–æ–π –∏ —Ç–µ–º–Ω–æ–π —Ç–µ–º—ã

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Node.js 18+
- Python 3.11+
- PostgreSQL (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è Supabase)
- Gemini API –∫–ª—é—á (–¥–ª—è –ò–ò —Ñ—É–Ω–∫—Ü–∏–π)

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**

```bash
npm install
```

2. **–°–æ–∑–¥–∞–π—Ç–µ `.env.local` –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞:**

```bash
GEMINI_API_KEY=your_api_key_here
```

3. **–°–æ–∑–¥–∞–π—Ç–µ `.env` –¥–ª—è –±—ç–∫–µ–Ω–¥–∞:**

```bash
DATABASE_URL=postgresql://user:password@host:port/database
```

4. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥:**

```bash
npm run dev
```

5. **–í –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –±—ç–∫–µ–Ω–¥:**

```bash
python main.py
```

## üê≥ Docker –¥–µ–ø–ª–æ–π

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

1. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ `.env.example` –≤ `.env` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:**

```bash
cp .env.example .env
```

2. **–û–±–Ω–æ–≤–∏—Ç–µ `YOUR_BOT_USERNAME` –≤ App.tsx** (—Å—Ç—Ä–æ–∫–∞ ~678):

```typescript
const botUsername = "–≤–∞—à_–±–æ—Ç"; // –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ username –≤–∞—à–µ–≥–æ Telegram –±–æ—Ç–∞
```

### –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫

```bash
# –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞
docker build -t lumina-grocer .

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker run -d -p 8000:8000 --env-file .env --name lumina-app lumina-grocer
```

### –î–µ–ø–ª–æ–π –Ω–∞ Timeweb

1. **–ó–∞–≥—Ä—É–∑–∏—Ç–µ –æ–±—Ä–∞–∑ –≤ Docker Registry –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ git deployment**

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ –ø–∞–Ω–µ–ª–∏ Timeweb:**
   - `DATABASE_URL` - —Å—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL
   - `GEMINI_API_KEY` - –∫–ª—é—á API Gemini

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ –ø–æ—Ä—Ç—É 8000**

## üì± –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–æ—Ç–∞

1. –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ [@BotFather](https://t.me/botfather)
2. –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
3. –°–æ–∑–¥–∞–π—Ç–µ Mini App –∫–æ–º–∞–Ω–¥–æ–π `/newapp`
4. –£–∫–∞–∂–∏—Ç–µ URL –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
5. –û–±–Ω–æ–≤–∏—Ç–µ `YOUR_BOT_USERNAME` –≤ –∫–æ–¥–µ

### –õ–æ–≥–∏–∫–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π

- –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É "+" –≤ —à–∞–ø–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ü–æ–¥–µ–ª–∏—Ç–µ—Å—å —Å—Å—ã–ª–∫–æ–π —Ñ–æ—Ä–º–∞—Ç–∞: `https://t.me/–≤–∞—à_–±–æ—Ç?startapp=invite_–ö–û–î`
- –ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—Å—è –∫ –≤–∞—à–µ–π —Å–µ–º—å–µ
- –ê–≤–∞—Ç–∞—Ä–∫–∏ —á–ª–µ–Ω–æ–≤ —Å–µ–º—å–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ —à–∞–ø–∫–µ (–¥–æ 5 —á–µ–ª–æ–≤–µ–∫)

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç —Ç–∞–±–ª–∏—Ü—ã –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ:

- `families` - —Å–µ–º—å–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `users` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ Telegram
- `items` - —Ç–æ–≤–∞—Ä—ã –≤ —Å–ø–∏—Å–∫–∞—Ö

## üîß API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

- `POST /api/auth` - –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `POST /api/join` - –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ —Å–µ–º—å–µ –ø–æ –∫–æ–¥—É
- `GET /api/items` - –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ —Å–µ–º—å–∏
- `POST /api/items` - –°–æ–∑–¥–∞–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
- `DELETE /api/items/{id}` - –£–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞

## üìù –ó–∞–º–µ—Ç–∫–∏

- TypeScript –æ—à–∏–±–∫–∏ –∏—Å—á–µ–∑–Ω—É—Ç –ø–æ—Å–ª–µ `npm install`
- –î–ª—è —Ä–∞–±–æ—Ç—ã –ò–ò —Ñ—É–Ω–∫—Ü–∏–π –Ω—É–∂–µ–Ω Gemini API –∫–ª—é—á
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Supabase –¥–ª—è –ë–î
- –í production —Å–º–µ–Ω–∏—Ç–µ CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `main.py`

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT
